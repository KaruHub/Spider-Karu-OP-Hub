local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/jensonhirst/Orion/main/source'))()
local player = game.Players.LocalPlayer
local itemsFolder = game.Workspace:WaitForChild("Items")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local window = OrionLib:MakeWindow({Name = "Spider-Karu-OP-Hub", HidePremium = false})
local teleportTab = window:MakeTab({Name = "Teleport", Icon = "rbxassetid://6031075938"})
local miscTab = window:MakeTab({Name = "Misc", Icon = "rbxassetid://6031075938"})
local autoFarmTab = window:MakeTab({Name = "AutoFarm", Icon = "rbxassetid://6031075938"})

local function updateDropdown()
    local items = {}
    for _, item in pairs(itemsFolder:GetChildren()) do
        if item:IsA("Model") and item.PrimaryPart then
            table.insert(items, item.Name)
        end
    end
    return items
end

-- Function to enable no-clip
local function enableNoClip()
    local character = player.Character
    if character then
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end

teleportTab:AddDropdown({
    Name = "Select Item to Teleport",
    Default = "None",
    Options = updateDropdown(),
    Callback = function(Value)
        local item = itemsFolder:FindFirstChild(Value)
        if item and item.PrimaryPart then
            enableNoClip()  -- Enable no-clip before teleporting
            player.Character:SetPrimaryPartCFrame(item.PrimaryPart.CFrame)
        end
    end
})

-- Teleport buttons for specified locations
local teleportLocations = {
    {Name = "Exit", Position = CFrame.new(500, 60, 90)},
    {Name = "Bunker", Position = CFrame.new(571, 44, 78)},
    {Name = "Outside Cabin", Position = CFrame.new(443, 62, 69)},
    {Name = "Spawn", Position = CFrame.new(520, 63, -63)},
    {Name = "Staircase", Position = CFrame.new(531, 72, 1)},
    {Name = "Safe Place", Position = CFrame.new(506, 63, 118)}
}

for _, location in pairs(teleportLocations) do
    teleportTab:AddButton({
        Name = "Teleport to " .. location.Name,
        Callback = function()
            player.Character:SetPrimaryPartCFrame(location.Position)
        end
    })
end

-- ESP toggle
local espEnabled = false
local function highlightPlayers()
    if espEnabled then
        for _, targetPlayer in ipairs(Players:GetPlayers()) do
            if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local oldHighlight = targetPlayer.Character:FindFirstChild("Highlight")
                if oldHighlight then
                    oldHighlight:Destroy()
                end

                local highlight = Instance.new("Highlight")
                highlight.Parent = targetPlayer.Character
                highlight.Name = "Highlight"
                highlight.Adornee = targetPlayer.Character
                highlight.FillColor = Color3.fromRGB(255, 255, 0)
                highlight.FillTransparency = 0.5
                highlight.OutlineTransparency = 0.5
                highlight.Enabled = true
            end
        end
    end
end

miscTab:AddCheckbox({
    Name = "ESP",
    Default = false,
    Callback = function(Value)
        espEnabled = Value
        highlightPlayers()
    end
})

-- AutoFarm script with toggle
local autoFarmEnabled = false
local duration = 8  -- Time in seconds to stay inside each player
local function teleportInside(targetPlayer)
    local targetCharacter = targetPlayer.Character
    if targetCharacter and targetCharacter:FindFirstChild("HumanoidRootPart") then
        local targetHRP = targetCharacter:WaitForChild("HumanoidRootPart")
        player.Character.HumanoidRootPart.CFrame = targetHRP.CFrame
    end
end

autoFarmTab:AddCheckbox({
    Name = "Enable AutoFarm",
    Default = false,
    Callback = function(Value)
        autoFarmEnabled = Value
        if autoFarmEnabled then
            -- Start AutoFarm loop
            spawn(function()
                while autoFarmEnabled do
                    for _, targetPlayer in ipairs(Players:GetPlayers()) do
                        if targetPlayer ~= player and targetPlayer.Character then
                            teleportInside(targetPlayer)
                            wait(duration)
                        end
                    end
                end
            end)
        end
    end
})

-- Adding a general toggle (Checkbox example)
miscTab:AddToggle({
    Name = "This is a checkbox toggle!",
    Default = false,  -- Default value is false (unchecked)
    Callback = function(Value)
        print("Checkbox state is now: " .. tostring(Value))
    end    
})

window:Toggle()
